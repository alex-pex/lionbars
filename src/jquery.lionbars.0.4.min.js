(function(a){a.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()};a.fn.lionbars=function(b){b=b||{};autohide=b.autohide;return this.each(function(){var Z,t=false,p=false,g=0,F=0,Q,P,L,K,l,k,E,D=false,ad=false,U=false;var c=this,y=0,Y=0,e=false,f=false,ac=0,u=0,s=0,q=0,x=0,ae=0,m=0,N=0,z=0,T=0,ag=0,n=0,j=0,R=0,A=0,i=0,M=0,ab=0,af=0,d=0;aa();function aa(){J(c);if(!a(c).is(":visible")){return}if(C(c)&&!a(c).hasClass("nolionbars")){w(c);V(c,f,e);W(c,f,e);v(c);H(c);O(c);h(c)}a(document).mousemove(function(ah){if(p){K=ah.pageY;F.scrollTop((k+K-P)*Math.abs(l))}if(t){L=ah.pageX;F.scrollLeft((k+L-Q)*Math.abs(l))}});a(document).mouseup(function(ah){if(p){p=false}if(t){t=false}})}function J(ai){var ah=a(ai);var aj=ah.find("> .lb-wrap > .lb-content");if(aj.length>0){ah.find("> .lb-v-scrollbar, > .lb-h-scrollbar").remove();ah.find("> .lb-wrap").replaceWith(aj.children())}ah.removeAttr("vratio").removeAttr("hratio");ah.css({overflow:"",padding:"",width:"",height:"",position:""})}function h(ai){var ah=a(ai);if(f||e){ah.find(".lb-wrap").scroll(function(ak){ah.find(".lb-v-scrollbar-slider").css({top:-a(this).scrollTop()/ah.attr("vratio")});ah.find(".lb-h-scrollbar-slider").css({left:-a(this).scrollLeft()/ah.attr("hratio")});if(ah.find(".lb-v-scrollbar").height()==(parseInt(ah.find(".lb-v-scrollbar-slider").css("top"))+ah.find(".lb-v-scrollbar-slider").height())&&typeof(b.reachedBottom)=="function"&&!ad){ad=true;var aj=a(this);b.reachedBottom.apply(a(this).children(".lb-content"),[function(){w(a(aj).parent(),{height:a(aj).children(".lb-content").get(0).scrollHeight,width:a(aj).children(".lb-content").get(0).scrollWidth});v(a(aj).parent());H(a(aj).parent());O(a(aj).parent());ad=false}])}if(ah.find(".lb-h-scrollbar").width()==(parseInt(ah.find(".lb-h-scrollbar-slider").css("left"))+ah.find(".lb-h-scrollbar-slider").width())&&typeof(b.reachedRight)=="function"&&!U){U=true;var aj=a(this);b.reachedRight.apply(a(this).children(".lb-content"),[function(){w(a(aj).parent(),{height:a(aj).children(".lb-content").get(0).scrollHeight,width:a(aj).children(".lb-content").get(0).scrollWidth});v(a(aj).parent());H(a(aj).parent());O(a(aj).parent());U=false}])}if(autohide){ah.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeIn(150);clearTimeout(Z);Z=setTimeout(function(){ah.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)},2000)}})}if(f){ah.find(".lb-v-scrollbar-slider").mousedown(function(aj){P=aj.pageY;p=true;g=a(this);F=ah.find(".lb-wrap");l=F.parent().attr("vratio");k=g.position().top;return false});ah.find(".lb-v-scrollbar").mousedown(function(aj){if(!a(aj.target).hasClass("lb-v-scrollbar-slider")){ah.find(".lb-wrap").scrollTop((aj.pageY-a(this).offset().top)*Math.abs(ah.attr("vratio"))-a(this).find(".lb-v-scrollbar-slider").height()/2)}return false})}if(e){ah.find(".lb-h-scrollbar-slider").mousedown(function(aj){Q=aj.pageX;t=true;g=a(this);F=ah.find(".lb-wrap");l=F.parent().attr("hratio");k=g.position().left;return false});ah.find(".lb-h-scrollbar").mousedown(function(aj){if(!a(aj.target).hasClass("lb-h-scrollbar-slider")){ah.find(".lb-wrap").scrollLeft((aj.pageX-a(this).offset().left)*Math.abs(ah.attr("hratio"))-a(this).find(".lb-h-scrollbar-slider").width()/2)}return false})}if((f||e)&&autohide){ah.find(".lb-v-scrollbar, .lb-h-scrollbar").hide();ah.hover(function(){},function(){ah.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)})}}function O(ai){A=(n-a(ai).find(".lb-wrap").get(0).scrollHeight-x-m)/(af-M);i=(ag-a(ai).find(".lb-wrap").get(0).scrollWidth-N-ae)/(d-ab);var ah=a(ai);ah.attr("vratio",A);ah.attr("hratio",i)}function H(aj){var ai=a(aj);var ah,ak,al;if(ai.find(".lb-v-scrollbar").length!=0){ah=20;al=n-ai.find(".lb-v-scrollbar").height();ak=n-al-ah;M=Math.round((n*ak)/z);M=(M<ah)?ah:M}if(ai.find(".lb-h-scrollbar").length!=0){ah=20;al=ag-ai.find(".lb-h-scrollbar").width();ak=ag-al-ah;ab=Math.round((ag*ak)/T);ab=(ab<ah)?ah:ab}ai.find(".lb-v-scrollbar-slider").css({height:M});ai.find(".lb-h-scrollbar-slider").css({width:ab})}function v(ai){var ah=a(ai);if(f&&e){af=ah.height()-12;d=ah.width()-12;ah.find(".lb-v-scrollbar").css({height:af});ah.find(".lb-h-scrollbar").css({width:d})}else{af=ah.height()-4;d=ah.width()-4;ah.find(".lb-v-scrollbar").css({height:af});ah.find(".lb-h-scrollbar").css({width:d})}}function W(aj,ah,ak){var ai=a(aj);if(ah||ak){ai.css({overflow:"hidden"});G(ai,ai.find(".lb-wrap"));S(ai);B(ai,ai.find(".lb-wrap"))}}function S(ai){var ah=a(ai);ah.css({width:ah.width()+u+q,height:ah.height()+ac+s})}function G(ak,aj){var ai=a(ak);var ah=a(aj);ai.css({padding:0});ah.css({"padding-top":ac+"px","padding-left":u+"px","padding-bottom":s+"px","padding-right":q+"px"})}function B(ah,ak){var ai=a(ah);var aj=a(ak);ai.css({position:"relative"});aj.css({width:ai.width()+y-u-q,height:ai.height()+Y-ac-s})}function X(ai){var ah=a(ai);ah.css({overflow:"auto"});y=ag-j-N-ae;ah.css({overflow:"hidden"})}function o(ai){var ah=a(ai);ah.css({overflow:"auto"});Y=n-R-x-m;ah.css({overflow:"hidden"})}function V(aj,ah,ak){var ai=a(aj);ai.wrapInner('<div class="lb-wrap" />');ai.find("> .lb-wrap").wrapInner('<div class="lb-content" />');if(ah){ai.prepend('<div class="lb-v-scrollbar" />');ai.find("> .lb-v-scrollbar").append('<div class="lb-v-scrollbar-slider" />')}if(ak){ai.prepend('<div class="lb-h-scrollbar" />');ai.find("> .lb-h-scrollbar").append('<div class="lb-h-scrollbar-slider" />')}}function C(ai){var ah=a(ai);f=false;e=false;r(ah);I(ah);ah.css({overflow:"hidden"});if(ah.get(0).scrollHeight>ah.get(0).clientHeight){f=true}if(ah.get(0).scrollWidth>ah.get(0).clientWidth){e=true}ah.css({overflow:"auto"});if(f||e){return true}}function r(ai){var ah=a(ai);ac=parseInt(ah.css("padding-top").replace("px",""));u=parseInt(ah.css("padding-left").replace("px",""));s=parseInt(ah.css("padding-bottom").replace("px",""));q=parseInt(ah.css("padding-right").replace("px",""))}function I(ai){var ah=a(ai);x=parseInt(ah.css("border-top-width").replace("px",""));ae=parseInt(ah.css("border-right-width").replace("px",""));m=parseInt(ah.css("border-bottom-width").replace("px",""));N=parseInt(ah.css("border-left-width").replace("px",""))}function w(aj,ah){var ai=a(aj).get(0);z=(typeof(ah)!="undefined")?ah.height:ai.scrollHeight;T=(typeof(ah)!="undefined")?ah.width:ai.scrollWidth;R=ai.clientHeight;j=ai.clientWidth;n=ai.offsetHeight;ag=ai.offsetWidth;X(a(aj));o(a(aj))}})}})(jQuery);